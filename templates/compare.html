{% extends "base.html" %}

{% block title %}Compare Resumes{% endblock %}

{% block content %}
<section class="compare-section">
    <div class="compare-header">
        <h1>Resume Comparison</h1>
        <div class="compare-actions">
            <button id="addResumeBtn" class="btn-secondary">
                <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                <span>Add Resume</span>
            </button>
            <button id="exportComparisonBtn" class="btn-primary">
                <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="7 10 12 15 17 10"></polyline>
                    <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
                <span>Export Comparison</span>
            </button>
        </div>
    </div>
    
    <div id="noCompare" class="no-compare">
        <svg viewBox="0 0 24 24" width="48" height="48" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="9" y1="3" x2="9" y2="21"></line>
        </svg>
        <h3>No Resumes Selected</h3>
        <p>Select resumes to compare side by side.</p>
        <button id="selectResumesBtn" class="btn-primary">Select Resumes</button>
    </div>
    
    <div class="compare-table-container" id="compareTableContainer">
        <div class="sticky-header">
            <div class="comparison-filter">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="overview">Overview</button>
                <button class="filter-btn" data-filter="education">Education</button>
                <button class="filter-btn" data-filter="experience">Experience</button>
                <button class="filter-btn" data-filter="skills">Skills</button>
                <button class="filter-btn" data-filter="ats">ATS Score</button>
            </div>
        </div>
        
        <div class="compare-table-wrapper">
            <table class="compare-table" id="compareTable">
                <thead>
                    <tr>
                        <th class="category-column">Category</th>
                        <!-- Resume columns will be added dynamically -->
                    </tr>
                </thead>
                <tbody>
                    <!-- Overview Section -->
                    <tr class="section-row" data-section="overview">
                        <td colspan="100%">Overview</td>
                    </tr>
                    <tr class="data-row" data-section="overview">
                        <td class="category-column">Name</td>
                        <!-- Data cells will be added dynamically -->
                    </tr>
                    <tr class="data-row" data-section="overview">
                        <td class="category-column">Job Role</td>
                    </tr>
                    <tr class="data-row" data-section="overview">
                        <td class="category-column">Contact</td>
                    </tr>
                    
                    <!-- Education Section -->
                    <tr class="section-row" data-section="education">
                        <td colspan="100%">Education</td>
                    </tr>
                    <tr class="data-row" data-section="education">
                        <td class="category-column">Degree</td>
                    </tr>
                    <tr class="data-row" data-section="education">
                        <td class="category-column">Institution</td>
                    </tr>
                    <tr class="data-row" data-section="education">
                        <td class="category-column">Year</td>
                    </tr>
                    
                    <!-- Experience Section -->
                    <tr class="section-row" data-section="experience">
                        <td colspan="100%">Experience</td>
                    </tr>
                    <tr class="data-row" data-section="experience">
                        <td class="category-column">Latest Position</td>
                    </tr>
                    <tr class="data-row" data-section="experience">
                        <td class="category-column">Company</td>
                    </tr>
                    <tr class="data-row" data-section="experience">
                        <td class="category-column">Duration</td>
                    </tr>
                    
                    <!-- Skills Section -->
                    <tr class="section-row" data-section="skills">
                        <td colspan="100%">Skills</td>
                    </tr>
                    <tr class="data-row" data-section="skills">
                        <td class="category-column">Technical Skills</td>
                    </tr>
                    <tr class="data-row" data-section="skills">
                        <td class="category-column">Certifications</td>
                    </tr>
                    
                    <!-- ATS Score Section -->
                    <tr class="section-row" data-section="ats">
                        <td colspan="100%">ATS Analysis</td>
                    </tr>
                    <tr class="data-row" data-section="ats">
                        <td class="category-column">ATS Score</td>
                    </tr>
                    <tr class="data-row" data-section="ats">
                        <td class="category-column">Top Suggestions</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <div id="resumeSelectionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Select Resumes to Compare</h2>
                <button class="close-btn">
                    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <p>Select up to 3 resumes to compare side by side.</p>
                <div class="resume-selection-list" id="resumeSelectionList">
                    <!-- Resume selection items will be added dynamically -->
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancelSelectionBtn" class="btn-secondary">Cancel</button>
                <button id="confirmSelectionBtn" class="btn-primary">Compare Selected</button>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/compare.js') }}"></script>
{% endblock %}